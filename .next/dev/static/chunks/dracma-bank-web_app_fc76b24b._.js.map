{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/lib/api.ts"],"sourcesContent":["\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport const API_URL = process.env.NEXT_PUBLIC_API_URL  || \"http://191.252.110.78/api\";\r\n\r\nfunction buildTargetUrl(req: Request, pathParts: string[]) {\r\n  const incoming = new URL(req.url);\r\n  const path = pathParts.join(\"/\");\r\n  // mantém querystring (?a=1&b=2)\r\n  return `${API_URL}/${path}${incoming.search}`;\r\n}\r\n\r\nasync function forward(req: Request, method: string, pathParts: string[]) {\r\n  const target = buildTargetUrl(req, pathParts);\r\n\r\n  // copia alguns headers úteis (token, etc.)\r\n  const headers = new Headers();\r\n  const auth = req.headers.get(\"authorization\");\r\n  if (auth) headers.set(\"authorization\", auth);\r\n\r\n  const contentType = req.headers.get(\"content-type\");\r\n  if (contentType) headers.set(\"content-type\", contentType);\r\n\r\n  // se você usa cookies/sessão, pode repassar cookie também:\r\n  const cookie = req.headers.get(\"cookie\");\r\n  if (cookie) headers.set(\"cookie\", cookie);\r\n\r\n  // corpo só para métodos que aceitam body\r\n  const hasBody = ![\"GET\", \"HEAD\"].includes(method.toUpperCase());\r\n  const body = hasBody ? await req.arrayBuffer() : undefined;\r\n\r\n  const resp = await fetch(target, {\r\n    method,\r\n    headers,\r\n    body,\r\n    // evita cache\r\n    cache: \"no-store\",\r\n    // importante: server-to-server\r\n    redirect: \"manual\",\r\n  });\r\n\r\n  // devolve exatamente o que o backend respondeu\r\n  const respBody = await resp.arrayBuffer();\r\n  const outHeaders = new Headers(resp.headers);\r\n\r\n  // opcional: evitar problemas de CORS no browser (normalmente nem precisa)\r\n  outHeaders.set(\"access-control-allow-origin\", \"*\");\r\n\r\n  return new NextResponse(respBody, {\r\n    status: resp.status,\r\n    headers: outHeaders,\r\n  });\r\n}\r\n\r\nexport async function GET(req: Request, { params }: { params: { path: string[] } }) {\r\n  return forward(req, \"GET\", params.path);\r\n}\r\nexport async function POST(req: Request, { params }: { params: { path: string[] } }) {\r\n  return forward(req, \"POST\", params.path);\r\n}\r\nexport async function PUT(req: Request, { params }: { params: { path: string[] } }) {\r\n  return forward(req, \"PUT\", params.path);\r\n}\r\nexport async function PATCH(req: Request, { params }: { params: { path: string[] } }) {\r\n  return forward(req, \"PATCH\", params.path);\r\n}\r\nexport async function DELETE(req: Request, { params }: { params: { path: string[] } }) {\r\n  return forward(req, \"DELETE\", params.path);\r\n}\r\n\r\n// Preflight (se algum dia precisar)\r\nexport async function OPTIONS() {\r\n  return new NextResponse(null, {\r\n    status: 204,\r\n    headers: {\r\n      \"access-control-allow-origin\": \"*\",\r\n      \"access-control-allow-methods\": \"GET,POST,PUT,PATCH,DELETE,OPTIONS\",\r\n      \"access-control-allow-headers\": \"authorization,content-type\",\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAGuB;AAFvB;;AAEO,MAAM,UAAU,oMAAO,CAAC,GAAG,CAAC,mBAAmB,IAAK;AAE3D,SAAS,eAAe,GAAY,EAAE,SAAmB;IACvD,MAAM,WAAW,IAAI,IAAI,IAAI,GAAG;IAChC,MAAM,OAAO,UAAU,IAAI,CAAC;IAC5B,gCAAgC;IAChC,OAAO,GAAG,QAAQ,CAAC,EAAE,OAAO,SAAS,MAAM,EAAE;AAC/C;AAEA,eAAe,QAAQ,GAAY,EAAE,MAAc,EAAE,SAAmB;IACtE,MAAM,SAAS,eAAe,KAAK;IAEnC,2CAA2C;IAC3C,MAAM,UAAU,IAAI;IACpB,MAAM,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC;IAC7B,IAAI,MAAM,QAAQ,GAAG,CAAC,iBAAiB;IAEvC,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC;IACpC,IAAI,aAAa,QAAQ,GAAG,CAAC,gBAAgB;IAE7C,2DAA2D;IAC3D,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC;IAC/B,IAAI,QAAQ,QAAQ,GAAG,CAAC,UAAU;IAElC,yCAAyC;IACzC,MAAM,UAAU,CAAC;QAAC;QAAO;KAAO,CAAC,QAAQ,CAAC,OAAO,WAAW;IAC5D,MAAM,OAAO,UAAU,MAAM,IAAI,WAAW,KAAK;IAEjD,MAAM,OAAO,MAAM,MAAM,QAAQ;QAC/B;QACA;QACA;QACA,cAAc;QACd,OAAO;QACP,+BAA+B;QAC/B,UAAU;IACZ;IAEA,+CAA+C;IAC/C,MAAM,WAAW,MAAM,KAAK,WAAW;IACvC,MAAM,aAAa,IAAI,QAAQ,KAAK,OAAO;IAE3C,0EAA0E;IAC1E,WAAW,GAAG,CAAC,+BAA+B;IAE9C,OAAO,IAAI,0KAAY,CAAC,UAAU;QAChC,QAAQ,KAAK,MAAM;QACnB,SAAS;IACX;AACF;AAEO,eAAe,IAAI,GAAY,EAAE,EAAE,MAAM,EAAkC;IAChF,OAAO,QAAQ,KAAK,OAAO,OAAO,IAAI;AACxC;KAFsB;AAGf,eAAe,KAAK,GAAY,EAAE,EAAE,MAAM,EAAkC;IACjF,OAAO,QAAQ,KAAK,QAAQ,OAAO,IAAI;AACzC;MAFsB;AAGf,eAAe,IAAI,GAAY,EAAE,EAAE,MAAM,EAAkC;IAChF,OAAO,QAAQ,KAAK,OAAO,OAAO,IAAI;AACxC;MAFsB;AAGf,eAAe,MAAM,GAAY,EAAE,EAAE,MAAM,EAAkC;IAClF,OAAO,QAAQ,KAAK,SAAS,OAAO,IAAI;AAC1C;MAFsB;AAGf,eAAe,OAAO,GAAY,EAAE,EAAE,MAAM,EAAkC;IACnF,OAAO,QAAQ,KAAK,UAAU,OAAO,IAAI;AAC3C;MAFsB;AAKf,eAAe;IACpB,OAAO,IAAI,0KAAY,CAAC,MAAM;QAC5B,QAAQ;QACR,SAAS;YACP,+BAA+B;YAC/B,gCAAgC;YAChC,gCAAgC;QAClC;IACF;AACF;MATsB"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/lib/childrenApi.ts"],"sourcesContent":["import { API_URL } from './api'\r\n\r\nexport type Child = {\r\n  id: string\r\n  name: string\r\n  photo_url?: string | null\r\n  is_active: boolean\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport async function listChildren(search?: string): Promise<Child[]> {\r\n  const url = new URL(`${API_URL}/admin/children`)\r\n  if (search && search.trim()) url.searchParams.set('search', search.trim())\r\n\r\n  const res = await fetch(url.toString(), { cache: 'no-store' })\r\n  if (!res.ok) throw new Error('Falha ao carregar crianças')\r\n  return res.json()\r\n}\r\n\r\nexport async function createChild(payload: { name: string; photo_url?: string }): Promise<Child> {\r\n  const res = await fetch(`${API_URL}/admin/children`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  })\r\n  if (!res.ok) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha ao cadastrar criança')\r\n  }\r\n  return res.json()\r\n}\r\n\r\nexport async function updateChild(\r\n  id: string,\r\n  payload: { name: string; photo_url?: string }\r\n): Promise<Child> {\r\n  const res = await fetch(`${API_URL}/admin/children/${id}`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  })\r\n  if (!res.ok) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha ao editar criança')\r\n  }\r\n  return res.json()\r\n}\r\n\r\nexport async function deleteChild(id: string): Promise<void> {\r\n  const res = await fetch(`${API_URL}/admin/children/${id}`, { method: 'DELETE' })\r\n  if (!res.ok && res.status !== 204) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha ao excluir criança')\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAWO,eAAe,aAAa,MAAe;IAChD,MAAM,MAAM,IAAI,IAAI,GAAG,wJAAO,CAAC,eAAe,CAAC;IAC/C,IAAI,UAAU,OAAO,IAAI,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU,OAAO,IAAI;IAEvE,MAAM,MAAM,MAAM,MAAM,IAAI,QAAQ,IAAI;QAAE,OAAO;IAAW;IAC5D,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,YAAY,OAA6C;IAC7E,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,eAAe,CAAC,EAAE;QACnD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,YACpB,EAAU,EACV,OAA6C;IAE7C,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,gBAAgB,EAAE,IAAI,EAAE;QACzD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,YAAY,EAAU;IAC1C,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,gBAAgB,EAAE,IAAI,EAAE;QAAE,QAAQ;IAAS;IAC9E,IAAI,CAAC,IAAI,EAAE,IAAI,IAAI,MAAM,KAAK,KAAK;QACjC,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;AACF"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/lib/cardsApi.ts"],"sourcesContent":["import { API_URL } from './api'\r\n\r\nexport type Card = {\r\n  id: string\r\n  child_id: string\r\n  token: string\r\n  status: 'ACTIVE' | 'BLOCKED' | 'REPLACED'\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport async function getActiveCardByChild(childId: string): Promise<Card | null> {\r\n  const res = await fetch(`${API_URL}/admin/cards/by-child/${childId}`, { cache: 'no-store' })\r\n  if (!res.ok) throw new Error('Falha ao buscar cartão')\r\n  return res.json()\r\n}\r\n\r\nexport async function issueCard(childId: string): Promise<Card> {\r\n  const res = await fetch(`${API_URL}/admin/cards/issue`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ childId }),\r\n  })\r\n  if (!res.ok) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha ao emitir cartão')\r\n  }\r\n  return res.json()\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAWO,eAAe,qBAAqB,OAAe;IACxD,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,sBAAsB,EAAE,SAAS,EAAE;QAAE,OAAO;IAAW;IAC1F,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,UAAU,OAAe;IAC7C,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,kBAAkB,CAAC,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/lib/childrenSummaryApi.ts"],"sourcesContent":["import { API_URL } from './api'\r\n\r\nexport type ChildSummary = {\r\n  child: { id: string; name: string; photo_url: string | null }\r\n  balance: number\r\n  entries: {\r\n    id: string\r\n    type: 'CREDIT' | 'DEBIT'\r\n    amount: number\r\n    reason: string\r\n    created_at: string\r\n  }[]\r\n}\r\n\r\nexport async function getChildSummary(childId: string): Promise<ChildSummary> {\r\n  const res = await fetch(`${API_URL}/admin/children/${childId}/summary`, { cache: 'no-store' })\r\n  if (!res.ok) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha ao carregar resumo')\r\n  }\r\n  return res.json()\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAcO,eAAe,gBAAgB,OAAe;IACnD,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,gBAAgB,EAAE,QAAQ,QAAQ,CAAC,EAAE;QAAE,OAAO;IAAW;IAC5F,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/lib/uploadApi.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3333'\r\n\r\nexport async function uploadPhoto(file: File): Promise<string> {\r\n  const fd = new FormData()\r\n  fd.append('file', file)\r\n\r\n  const res = await fetch(`${API_URL}/admin/uploads/photo`, {\r\n    method: 'POST',\r\n    body: fd,\r\n  })\r\n\r\n  if (!res.ok) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha no upload')\r\n  }\r\n\r\n  const data = await res.json()\r\n  return data.url as string\r\n}\r\n"],"names":[],"mappings":";;;;AAAgB;AAAhB,MAAM,UAAU,oMAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAE5C,eAAe,YAAY,IAAU;IAC1C,MAAM,KAAK,IAAI;IACf,GAAG,MAAM,CAAC,QAAQ;IAElB,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,oBAAoB,CAAC,EAAE;QACxD,QAAQ;QACR,MAAM;IACR;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,GAAG;AACjB"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/components/admin/TabsCriancas.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Stack,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Avatar,\r\n  InputAdornment,\r\n  Alert,\r\n  CircularProgress,\r\n  IconButton,\r\n} from '@mui/material'\r\n\r\nimport AddIcon from '@mui/icons-material/Add'\r\nimport SearchIcon from '@mui/icons-material/Search'\r\nimport EditIcon from '@mui/icons-material/Edit'\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline'\r\nimport CreditCardIcon from '@mui/icons-material/CreditCard'\r\nimport VisibilityIcon from '@mui/icons-material/Visibility'\r\nimport Divider from '@mui/material/Divider'\r\nimport {\r\n  listChildren,\r\n  createChild,\r\n  updateChild,\r\n  deleteChild,\r\n  type Child,\r\n} from '@/app/lib/childrenApi'\r\nimport { getActiveCardByChild, issueCard } from '@/app/lib/cardsApi'\r\nimport { getChildSummary, type ChildSummary } from '@/app/lib/childrenSummaryApi'\r\nimport { uploadPhoto } from '@/app/lib/uploadApi'\r\n\r\n\r\nexport default function TabsCriancas() {\r\n  const [rows, setRows] = React.useState<Child[]>([])\r\n  const [search, setSearch] = React.useState('')\r\n  const [loading, setLoading] = React.useState(false)\r\n  const [saving, setSaving] = React.useState(false)\r\n  const [error, setError] = React.useState<string | null>(null)\r\n\r\n  // modal create / edit\r\n  const [open, setOpen] = React.useState(false)\r\n  const [editing, setEditing] = React.useState<Child | null>(null)\r\n\r\n  // confirm delete\r\n  const [confirmDelete, setConfirmDelete] = React.useState<Child | null>(null)\r\n\r\n  // form\r\n  const [name, setName] = React.useState('')\r\n  const [photoUrl, setPhotoUrl] = React.useState('')\r\n\r\nconst [openDetails, setOpenDetails] = React.useState(false)\r\nconst [detailsLoading, setDetailsLoading] = React.useState(false)\r\nconst [summary, setSummary] = React.useState<ChildSummary | null>(null)\r\n\r\n\r\n  async function load(currentSearch?: string) {\r\n    setLoading(true)\r\n    setError(null)\r\n    try {\r\n      const data = await listChildren(currentSearch)\r\n      setRows(data)\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao carregar crianças')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    load('')\r\n  }, [])\r\n\r\n  function resetForm() {\r\n    setName('')\r\n    setPhotoUrl('')\r\n  }\r\n\r\n  function openCreate() {\r\n    resetForm()\r\n    setEditing(null)\r\n    setOpen(true)\r\n  }\r\n\r\n  function openEdit(child: Child) {\r\n    setEditing(child)\r\n    setName(child.name)\r\n    setPhotoUrl(child.photo_url || '')\r\n    setOpen(true)\r\n  }\r\n\r\n  async function handleSave() {\r\n    const trimmed = name.trim()\r\n    if (!trimmed) return\r\n\r\n    setSaving(true)\r\n    setError(null)\r\n\r\n    try {\r\n      if (editing) {\r\n        await updateChild(editing.id, {\r\n          name: trimmed,\r\n          photo_url: photoUrl.trim() || '',\r\n        })\r\n      } else {\r\n        await createChild({\r\n          name: trimmed,\r\n          photo_url: photoUrl.trim() || '',\r\n        })\r\n      }\r\n\r\n      setOpen(false)\r\n      setEditing(null)\r\n      resetForm()\r\n      await load(search)\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao salvar')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  async function handleDelete() {\r\n    if (!confirmDelete) return\r\n\r\n    setSaving(true)\r\n    setError(null)\r\n\r\n    try {\r\n      await deleteChild(confirmDelete.id)\r\n      setConfirmDelete(null)\r\n      await load(search)\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao excluir')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  async function handleViewCard(childId: string) {\r\n  setSaving(true)\r\n  setError(null)\r\n  try {\r\n    let card = await getActiveCardByChild(childId)\r\n    if (!card) {\r\n      card = await issueCard(childId)\r\n    }\r\n    window.open(`/c/${card.token}`, '_blank')\r\n  } catch (e: any) {\r\n    setError(e?.message || 'Erro ao abrir cartão')\r\n  } finally {\r\n    setSaving(false)\r\n  }\r\n}\r\n\r\nasync function openDetailsDialog(child: Child) {\r\n  setError(null)\r\n  setDetailsLoading(true)\r\n  setOpenDetails(true)\r\n  setSummary(null)\r\n\r\n  try {\r\n    const data = await getChildSummary(child.id)\r\n    setSummary(data)\r\n  } catch (e: any) {\r\n    setError(e?.message || 'Erro ao carregar detalhes')\r\n  } finally {\r\n    setDetailsLoading(false)\r\n  }\r\n}\r\n\r\n\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 1000, mx: 'auto' }}>\r\n      <Paper sx={{ p: 2 }}>\r\n        {/* Header */}\r\n        <Stack\r\n          direction={{ xs: 'column', sm: 'row' }}\r\n          spacing={2}\r\n          alignItems={{ xs: 'stretch', sm: 'center' }}\r\n          justifyContent=\"space-between\"\r\n        >\r\n          <Box>\r\n            <Typography variant=\"h6\">Crianças</Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Cadastre, edite e gerencie as crianças do Dracma Bank.\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Button variant=\"contained\" startIcon={<AddIcon />} onClick={openCreate}>\r\n            Cadastrar criança\r\n          </Button>\r\n        </Stack>\r\n\r\n        {error && (\r\n          <Box sx={{ mt: 2 }}>\r\n            <Alert severity=\"error\">{error}</Alert>\r\n          </Box>\r\n        )}\r\n\r\n        {/* Search */}\r\n        <Box sx={{ mt: 2 }}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Buscar por nome\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter') load(search)\r\n            }}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon fontSize=\"small\" />\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: (\r\n                <Button onClick={() => load(search)} disabled={loading}>\r\n                  Buscar\r\n                </Button>\r\n              ),\r\n            }}\r\n          />\r\n        </Box>\r\n\r\n        {/* Table */}\r\n        <Box sx={{ mt: 2, overflowX: 'auto' }}>\r\n          {loading ? (\r\n            <Box sx={{ py: 6, display: 'flex', justifyContent: 'center' }}>\r\n              <CircularProgress />\r\n            </Box>\r\n          ) : (\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Foto</TableCell>\r\n                  <TableCell>Nome</TableCell>\r\n                  {/* <TableCell>ID</TableCell> */}\r\n                  <TableCell align=\"right\">Ações</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n\r\n              <TableBody>\r\n                {rows.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell colSpan={4}>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        Nenhuma criança cadastrada.\r\n                      </Typography>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  rows.map((c) => (\r\n                    <TableRow key={c.id} hover>\r\n                      <TableCell>\r\n                        <Avatar src={c.photo_url || undefined}>\r\n                          {c.name?.[0]?.toUpperCase()}\r\n                        </Avatar>\r\n                      </TableCell>\r\n\r\n                      <TableCell sx={{ fontWeight: 600 }}>\r\n                        {c.name}\r\n                      </TableCell>\r\n\r\n                      {/* <TableCell sx={{ fontFamily: 'monospace' }}>\r\n                        {c.id}\r\n                      </TableCell> */}\r\n\r\n                      <TableCell align=\"right\">\r\n\r\n                       <IconButton aria-label=\"Ver cartão\" onClick={() => handleViewCard(c.id)} title=\"Ver cartão\">\r\n                          <CreditCardIcon />\r\n                       </IconButton>\r\n                       <IconButton aria-label=\"Detalhes\" title=\"Detalhes / Extrato\" onClick={() => openDetailsDialog(c)}>\r\n                          <VisibilityIcon />\r\n                        </IconButton>\r\n                        <IconButton onClick={() => openEdit(c)} title=\"Editar\">\r\n                          <EditIcon />\r\n                        </IconButton>\r\n\r\n                        <IconButton\r\n                          color=\"error\"\r\n                          onClick={() => setConfirmDelete(c)}  title=\"Excluir\"\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </Box>\r\n      </Paper>\r\n\r\n      {/* Modal Create / Edit */}\r\n      <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\">\r\n        <DialogTitle>\r\n          {editing ? 'Editar criança' : 'Cadastrar criança'}\r\n        </DialogTitle>\r\n\r\n        <DialogContent>\r\n          <Stack spacing={2} sx={{ mt: 1 }}>\r\n            <TextField\r\n              autoFocus\r\n              label=\"Nome da criança\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              fullWidth\r\n            />\r\n\r\n            <TextField\r\n              label=\"URL da foto (opcional)\"\r\n              value={photoUrl}\r\n              onChange={(e) => setPhotoUrl(e.target.value)}\r\n              placeholder=\"https://...\"\r\n              fullWidth\r\n            />\r\n\r\n            <Stack direction={{ xs: 'column', sm: 'row' }} spacing={1} alignItems=\"center\">\r\n  <Button variant=\"outlined\" component=\"label\">\r\n    Enviar foto\r\n    <input\r\n      hidden\r\n      type=\"file\"\r\n      accept=\"image/png,image/jpeg,image/webp\"\r\n      onChange={async (e) => {\r\n        const f = e.target.files?.[0]\r\n        if (!f) return\r\n\r\n        try {\r\n          // opcional: loading state\r\n          const url = await uploadPhoto(f)\r\n          setForm((prev) => ({ ...prev, photo_url: url }))\r\n        } catch (err: any) {\r\n          alert(err?.message || 'Erro no upload')\r\n        } finally {\r\n          // limpa input pra permitir reenviar o mesmo arquivo\r\n          e.target.value = ''\r\n        }\r\n      }}\r\n    />\r\n  </Button>\r\n\r\n  <Typography variant=\"body2\" color=\"text.secondary\">\r\n    JPG/PNG/WEBP até 2MB\r\n  </Typography>\r\n</Stack>\r\n\r\n          </Stack>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button onClick={() => setOpen(false)} disabled={saving}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={handleSave}\r\n            disabled={!name.trim() || saving}\r\n          >\r\n            {saving\r\n              ? 'Salvando...'\r\n              : editing\r\n              ? 'Salvar alterações'\r\n              : 'Salvar'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Confirm Delete */}\r\n      <Dialog\r\n        open={!!confirmDelete}\r\n        onClose={() => setConfirmDelete(null)}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>Excluir criança</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body2\">\r\n            Tem certeza que deseja excluir{' '}\r\n            <b>{confirmDelete?.name}</b>?\r\n            <br />\r\n            A criança será apenas desativada.\r\n          </Typography>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button onClick={() => setConfirmDelete(null)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"error\"\r\n            onClick={handleDelete}\r\n            disabled={saving}\r\n          >\r\n            Excluir\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog open={openDetails} onClose={() => setOpenDetails(false)} fullWidth maxWidth=\"md\">\r\n  <DialogTitle>Detalhes / Extrato</DialogTitle>\r\n\r\n  <DialogContent>\r\n    {detailsLoading ? (\r\n      <Box sx={{ py: 6, display: 'flex', justifyContent: 'center' }}>\r\n        <CircularProgress />\r\n      </Box>\r\n    ) : !summary ? (\r\n      <Typography variant=\"body2\" color=\"text.secondary\">\r\n        Nenhum dado para mostrar.\r\n      </Typography>\r\n    ) : (\r\n      <Box>\r\n        <Stack direction=\"row\" spacing={2} alignItems=\"center\">\r\n          <Avatar src={summary.child.photo_url || undefined}>\r\n            {summary.child.name?.[0]?.toUpperCase()}\r\n          </Avatar>\r\n\r\n          <Box>\r\n            <Typography fontWeight={800}>{summary.child.name}</Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Saldo atual: <b>{summary.balance}</b> Dracmas\r\n            </Typography>\r\n          </Box>\r\n        </Stack>\r\n\r\n        <Divider sx={{ my: 2 }} />\r\n\r\n        <Typography fontWeight={800} sx={{ mb: 1 }}>\r\n          Movimentações (últimas 30)\r\n        </Typography>\r\n\r\n        {summary.entries.length === 0 ? (\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Nenhuma movimentação ainda.\r\n          </Typography>\r\n        ) : (\r\n          <Table size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Data</TableCell>\r\n                <TableCell>Motivo</TableCell>\r\n                <TableCell>Tipo</TableCell>\r\n                <TableCell align=\"right\">Valor</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {summary.entries.map((e) => (\r\n                <TableRow key={e.id} hover>\r\n                  <TableCell>\r\n                    {new Date(e.created_at).toLocaleString('pt-BR')}\r\n                  </TableCell>\r\n                  <TableCell>{e.reason}</TableCell>\r\n                  <TableCell>{e.type === 'CREDIT' ? 'Entrada' : 'Saída'}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {e.type === 'CREDIT' ? '+' : '-'}{e.amount}\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </Box>\r\n    )}\r\n  </DialogContent>\r\n<DialogActions>\r\n    <Button onClick={() => setOpenDetails(false)}>Fechar</Button>\r\n  </DialogActions>\r\n</Dialog>\r\n\r\n    </Box>\r\n\r\n\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/lib/ledgerApi.ts"],"sourcesContent":["import { API_URL } from './api'\r\n\r\nexport type LedgerEntry = {\r\n  id: string\r\n  child_id: string\r\n  type: 'CREDIT' | 'DEBIT'\r\n  amount: number\r\n  reason: string\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport async function createLedgerEntry(payload: {\r\n  childId: string\r\n  type: 'CREDIT' | 'DEBIT'\r\n  amount: number\r\n  reason: string\r\n}): Promise<LedgerEntry> {\r\n  const res = await fetch(`${API_URL}/admin/ledger`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  })\r\n\r\n  if (!res.ok) {\r\n    const msg = await res.text()\r\n    throw new Error(msg || 'Falha ao lançar Dracmas')\r\n  }\r\n\r\n  return res.json()\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAYO,eAAe,kBAAkB,OAKvC;IACC,MAAM,MAAM,MAAM,MAAM,GAAG,wJAAO,CAAC,aAAa,CAAC,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,OAAO;IACzB;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 1288, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/components/admin/TabsLancamentos.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  Stack,\r\n  TextField,\r\n  MenuItem,\r\n  Button,\r\n  Alert,\r\n} from '@mui/material'\r\n\r\nimport { listChildren, type Child } from '@/app/lib/childrenApi'\r\nimport { createLedgerEntry } from '@/app/lib/ledgerApi'\r\n\r\nexport default function TabsLancamentos() {\r\n  const [children, setChildren] = React.useState<Child[]>([])\r\n  const [childId, setChildId] = React.useState('')\r\n  const [type, setType] = React.useState<'CREDIT' | 'DEBIT'>('CREDIT')\r\n  const [amount, setAmount] = React.useState<number>(5)\r\n  const [reason, setReason] = React.useState('')\r\n\r\n  const [saving, setSaving] = React.useState(false)\r\n  const [error, setError] = React.useState<string | null>(null)\r\n  const [success, setSuccess] = React.useState<string | null>(null)\r\n\r\n  React.useEffect(() => {\r\n    ;(async () => {\r\n      try {\r\n        const list = await listChildren('')\r\n        setChildren(list)\r\n        if (list[0]?.id) setChildId(list[0].id)\r\n      } catch (e: any) {\r\n        setError(e?.message || 'Erro ao carregar crianças')\r\n      }\r\n    })()\r\n  }, [])\r\n\r\n  async function handleSubmit() {\r\n    setError(null)\r\n    setSuccess(null)\r\n\r\n    if (!childId) return setError('Selecione uma criança')\r\n    if (!reason.trim()) return setError('Informe o motivo')\r\n    if (!Number.isInteger(amount) || amount <= 0) return setError('Valor inválido')\r\n\r\n    setSaving(true)\r\n    try {\r\n      await createLedgerEntry({\r\n        childId,\r\n        type,\r\n        amount,\r\n        reason: reason.trim(),\r\n      })\r\n      setSuccess('Lançamento realizado com sucesso!')\r\n      setReason('')\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao lançar')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 800, mx: 'auto' }}>\r\n      <Paper sx={{ p: 2 }}>\r\n        <Typography variant=\"h6\">Lançamentos</Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          Adicione ou retire Dracmas com motivo (auditável).\r\n        </Typography>\r\n\r\n        <Stack spacing={2} sx={{ mt: 2 }}>\r\n          {error && <Alert severity=\"error\">{error}</Alert>}\r\n          {success && <Alert severity=\"success\">{success}</Alert>}\r\n\r\n          <TextField\r\n            select\r\n            label=\"Criança\"\r\n            value={childId}\r\n            onChange={(e) => setChildId(e.target.value)}\r\n            fullWidth\r\n          >\r\n            {children.map((c) => (\r\n              <MenuItem key={c.id} value={c.id}>\r\n                {c.name}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n\r\n          <TextField\r\n            select\r\n            label=\"Tipo\"\r\n            value={type}\r\n            onChange={(e) => setType(e.target.value as 'CREDIT' | 'DEBIT')}\r\n            fullWidth\r\n          >\r\n            <MenuItem value=\"CREDIT\">Entrada (+)</MenuItem>\r\n            <MenuItem value=\"DEBIT\">Saída (-)</MenuItem>\r\n          </TextField>\r\n\r\n          <TextField\r\n            type=\"number\"\r\n            label=\"Quantidade de Dracmas\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(Number(e.target.value))}\r\n            fullWidth\r\n            inputProps={{ min: 1, step: 1 }}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Motivo\"\r\n            value={reason}\r\n            onChange={(e) => setReason(e.target.value)}\r\n            placeholder=\"Ex: Presença no culto\"\r\n            fullWidth\r\n          />\r\n\r\n          <Button variant=\"contained\" onClick={handleSubmit} disabled={saving}>\r\n            {saving ? 'Salvando...' : 'Lançar'}\r\n          </Button>\r\n        </Stack>\r\n      </Paper>\r\n    </Box>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1521, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/components/admin/TabsCartoes.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  Stack,\r\n  TextField,\r\n  MenuItem,\r\n  Button,\r\n  Alert,\r\n  Divider,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  CircularProgress,\r\n} from '@mui/material'\r\n\r\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\r\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew'\r\nimport PrintIcon from '@mui/icons-material/Print'\r\nimport RefreshIcon from '@mui/icons-material/Refresh'\r\nimport CreditCardIcon from '@mui/icons-material/CreditCard'\r\n\r\nimport QRCode from 'react-qr-code'\r\n\r\nimport { listChildren, type Child } from '@/app/lib/childrenApi'\r\nimport { getActiveCardByChild, issueCard, type Card } from '@/app/lib/cardsApi'\r\n\r\nconst APP_URL =\"http://191.252.110.78\"\r\n\r\nfunction shortToken(t: string) {\r\n  if (!t) return ''\r\n  return `${t.slice(0, 8)}…${t.slice(-6)}`\r\n}\r\n\r\ntype BatchItem = {\r\n  child: Child\r\n  card: Card\r\n  url: string\r\n}\r\n\r\nfunction CreditStyleCard({\r\n  childName,\r\n  token,\r\n  walletUrl,\r\n}: {\r\n  childName: string\r\n  token: string\r\n  walletUrl: string\r\n}) {\r\n  return (\r\n    <div\r\n      className=\"db-card\"\r\n      style={{\r\n        boxShadow: '0 12px 30px rgba(0,0,0,0.18)',\r\n        background: 'linear-gradient(135deg, #0b1220 0%, #111f3a 45%, #1b2a4a 100%)',\r\n      }}\r\n    >\r\n      {/* brilho/ondas */}\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          inset: 0,\r\n          background:\r\n            'radial-gradient(120px 80px at 18% 25%, rgba(255,255,255,0.10), transparent 60%),' +\r\n            'radial-gradient(160px 120px at 85% 15%, rgba(255,255,255,0.08), transparent 60%),' +\r\n            'radial-gradient(220px 140px at 70% 95%, rgba(255,255,255,0.06), transparent 60%)',\r\n          pointerEvents: 'none',\r\n        }}\r\n      />\r\n\r\n      {/* faixa diagonal */}\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          width: '140%',\r\n          height: '22%',\r\n          left: '-20%',\r\n          top: '55%',\r\n          transform: 'rotate(-10deg)',\r\n          background: 'rgba(255,255,255,0.06)',\r\n          pointerEvents: 'none',\r\n        }}\r\n      />\r\n\r\n      <div className=\"db-card-inner\" style={{ color: 'white', position: 'relative' }}>\r\n        {/* topo */}\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <div>\r\n            <div style={{ fontSize: '3.2mm', fontWeight: 800, letterSpacing: '0.2mm' }}>\r\n              Dracma Bank\r\n            </div>\r\n            <div className=\"db-muted\" style={{ fontSize: '2.6mm', marginTop: '0.6mm' }}>\r\n              Carteirinha oficial\r\n            </div>\r\n          </div>\r\n\r\n          {/* logo placeholder (troque depois por img) */}\r\n          <div\r\n            style={{\r\n              width: '9mm',\r\n              height: '9mm',\r\n              borderRadius: '2mm',\r\n              background: 'rgba(255,255,255,0.10)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontWeight: 900,\r\n              fontSize: '3.2mm',\r\n            }}\r\n            aria-label=\"Logo Dracma Bank\"\r\n          >\r\n            DB\r\n          </div>\r\n        </div>\r\n\r\n        {/* chip fake */}\r\n        <div\r\n          style={{\r\n            marginTop: '4.2mm',\r\n            width: '14mm',\r\n            height: '10mm',\r\n            borderRadius: '2mm',\r\n            background: 'linear-gradient(135deg, rgba(255,255,255,0.22), rgba(255,255,255,0.08))',\r\n            border: '0.2mm solid rgba(255,255,255,0.15)',\r\n          }}\r\n        />\r\n\r\n        {/* nome */}\r\n        <div style={{ marginTop: '4.2mm' }}>\r\n          <div className=\"db-muted\" style={{ fontSize: '2.6mm' }}>\r\n            Nome\r\n          </div>\r\n          <div\r\n            style={{\r\n              fontSize: '4.2mm',\r\n              fontWeight: 900,\r\n              lineHeight: 1.1,\r\n              marginTop: '0.8mm',\r\n              maxWidth: '70mm',\r\n              whiteSpace: 'nowrap',\r\n              overflow: 'hidden',\r\n              textOverflow: 'ellipsis',\r\n            }}\r\n          >\r\n            {childName}\r\n          </div>\r\n        </div>\r\n\r\n        {/* rodapé: token + QR pequeno */}\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            left: '4.5mm',\r\n            right: '4.5mm',\r\n            bottom: '4.0mm',\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'flex-end',\r\n            gap: '4mm',\r\n          }}\r\n        >\r\n          <div style={{ minWidth: 0 }}>\r\n            <div className=\"db-muted\" style={{ fontSize: '2.4mm' }}>\r\n              \r\n            </div>\r\n\r\n            <div\r\n              className=\"db-mono\"\r\n              style={{\r\n                fontSize: '2.8mm',\r\n                opacity: 0.9,\r\n                marginTop: '0.6mm',\r\n                whiteSpace: 'nowrap',\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis',\r\n                maxWidth: '48mm',\r\n              }}\r\n            >\r\n              {token ? shortToken(token) : ''}\r\n            </div>\r\n\r\n            <div className=\"db-muted\" style={{ fontSize: '2.2mm', marginTop: '1.2mm' }}>\r\n              Aponte a câmera para ver o saldo\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              background: 'white',\r\n              borderRadius: '2mm',\r\n              padding: '1.6mm',\r\n              width: '16mm',\r\n              height: '16mm',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n            }}\r\n          >\r\n            {walletUrl ? (\r\n              <QRCode value={walletUrl} size={56} />\r\n            ) : (\r\n              <span style={{ fontSize: '2.4mm', color: '#334155' }}>Sem QR</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function TabsCartoes() {\r\n  const [children, setChildren] = React.useState<Child[]>([])\r\n  const [childId, setChildId] = React.useState('')\r\n\r\n  const [activeCard, setActiveCard] = React.useState<Card | null>(null)\r\n\r\n  const [loading, setLoading] = React.useState(false)\r\n  const [working, setWorking] = React.useState(false)\r\n  const [error, setError] = React.useState<string | null>(null)\r\n  const [success, setSuccess] = React.useState<string | null>(null)\r\n\r\n  const [printMode, setPrintMode] = React.useState<'single' | 'batch'>('single')\r\n  const [batchItems, setBatchItems] = React.useState<BatchItem[]>([])\r\n  const [batchMissingCount, setBatchMissingCount] = React.useState(0)\r\n\r\n  const selectedChild = React.useMemo(\r\n    () => children.find((c) => c.id === childId) || null,\r\n    [children, childId]\r\n  )\r\n\r\n  const walletUrl = React.useMemo(() => {\r\n    if (!activeCard?.token) return ''\r\n    return `${APP_URL}/c/${activeCard.token}`\r\n  }, [activeCard?.token])\r\n\r\n  async function bootstrap() {\r\n    setError(null)\r\n    setSuccess(null)\r\n    setLoading(true)\r\n    try {\r\n      const list = await listChildren('')\r\n      setChildren(list)\r\n      if (list[0]?.id) setChildId(list[0].id)\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao carregar crianças')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function loadCard(forChildId?: string) {\r\n    const id = forChildId || childId\r\n    if (!id) return\r\n\r\n    setError(null)\r\n    setSuccess(null)\r\n    setLoading(true)\r\n    try {\r\n      const card = await getActiveCardByChild(id)\r\n      setActiveCard(card)\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao carregar cartão')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    bootstrap()\r\n  }, [])\r\n\r\n  React.useEffect(() => {\r\n    if (childId) loadCard(childId)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [childId])\r\n\r\n  async function handleGenerateCard() {\r\n    if (!childId) return\r\n    setWorking(true)\r\n    setError(null)\r\n    setSuccess(null)\r\n    try {\r\n      const created = await issueCard(childId) // sua função existente\r\n      setSuccess(`Cartão gerado: ${shortToken(created.token)}`)\r\n      await loadCard(childId)\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao gerar cartão')\r\n    } finally {\r\n      setWorking(false)\r\n    }\r\n  }\r\n\r\n  async function handleCopyLink() {\r\n    if (!walletUrl) return\r\n    try {\r\n      await navigator.clipboard.writeText(walletUrl)\r\n      setSuccess('Link copiado!')\r\n    } catch {\r\n      setError('Não consegui copiar. Copie manualmente.')\r\n    }\r\n  }\r\n\r\n  function handleOpenWallet() {\r\n    if (!walletUrl) return\r\n    window.open(walletUrl, '_blank')\r\n  }\r\n\r\n  function handlePrintSingle() {\r\n    if (!walletUrl || !selectedChild || !activeCard?.token) return\r\n    setPrintMode('single')\r\n    setTimeout(() => window.print(), 120)\r\n  }\r\n\r\n  async function handlePrintBatch() {\r\n    setWorking(true)\r\n    setError(null)\r\n    setSuccess(null)\r\n\r\n    try {\r\n      // busca cartão ativo para cada criança (SEM criar automaticamente)\r\n      const results = await Promise.all(\r\n        children.map(async (ch) => {\r\n          const card = await getActiveCardByChild(ch.id)\r\n          if (!card?.token) return null\r\n          return {\r\n            child: ch,\r\n            card,\r\n            url: `${APP_URL}/c/${card.token}`,\r\n          } as BatchItem\r\n        })\r\n      )\r\n\r\n      const items = results.filter(Boolean) as BatchItem[]\r\n      const missing = children.length - items.length\r\n\r\n      setBatchItems(items)\r\n      setBatchMissingCount(missing)\r\n\r\n      if (items.length === 0) {\r\n        setError('Nenhum cartão encontrado para imprimir. Gere os cartões antes.')\r\n        return\r\n      }\r\n\r\n      setPrintMode('batch')\r\n\r\n      // garante render antes do print\r\n      setTimeout(() => window.print(), 180)\r\n\r\n      if (missing > 0) {\r\n        setSuccess(`Imprimindo ${items.length} cartões. ${missing} crianças ainda sem cartão.`)\r\n      } else {\r\n        setSuccess(`Imprimindo ${items.length} cartões.`)\r\n      }\r\n    } catch (e: any) {\r\n      setError(e?.message || 'Erro ao preparar impressão em lote')\r\n    } finally {\r\n      setWorking(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 1000, mx: 'auto' }}>\r\n       <style>{`\r\n  /* NÃO aparece na tela */\r\n  #print-root { display: none; }\r\n\r\n  /* Configuração da página de impressão */\r\n  @page {\r\n    size: A4;\r\n    margin: 10mm;\r\n  }\r\n\r\n  @media print {\r\n    body * { visibility: hidden !important; }\r\n\r\n    /* Agora aparece no print */\r\n    #print-root { display: block; }\r\n\r\n    /* Mostra SOMENTE a área de impressão */\r\n    #print-root, #print-root * {\r\n      visibility: visible !important;\r\n    }\r\n\r\n    #print-root {\r\n      position: fixed;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      padding: 0;\r\n      margin: 0;\r\n      background: white;\r\n    }\r\n\r\n    /* Importante: no A4, 2 colunas é o máximo sem cortar */\r\n    .batch-grid {\r\n      grid-template-columns: repeat(2, 1fr) !important;\r\n      gap: 6mm;\r\n      padding: 0 !important;\r\n      box-sizing: border-box;\r\n      justify-items: center;\r\n      align-items: start;\r\n    }\r\n  }\r\n\r\n  /* cartão em tamanho real (padrão cartão de crédito) */\r\n  .db-card {\r\n    width: 85.6mm;\r\n    height: 53.98mm;\r\n    border-radius: 3.5mm;\r\n    overflow: hidden;\r\n    position: relative;\r\n    -webkit-print-color-adjust: exact;\r\n    print-color-adjust: exact;\r\n  }\r\n\r\n  .db-card-inner {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 4.5mm;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .db-muted { opacity: 0.85; }\r\n\r\n  .db-mono {\r\n    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\r\n  }\r\n\r\n  /* impressão em lote: grid de cartões (na tela pode ser 3 colunas) */\r\n  .batch-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(3, 1fr);\r\n    gap: 6mm;\r\n    padding: 10mm;\r\n    box-sizing: border-box;\r\n    align-items: start;\r\n    justify-items: center;\r\n  }\r\n\r\n  .no-break {\r\n    break-inside: avoid;\r\n    page-break-inside: avoid;\r\n  }\r\n\r\n  .page-break {\r\n    break-after: page;\r\n    page-break-after: always;\r\n    height: 0;\r\n  }\r\n\r\n  /* responsivo fora do print */\r\n  @media screen and (max-width: 900px) {\r\n    .batch-grid { grid-template-columns: repeat(2, 1fr); }\r\n  }\r\n  @media screen and (max-width: 600px) {\r\n    .batch-grid { grid-template-columns: 1fr; }\r\n  }\r\n`}</style>\r\n\r\n\r\n      <Paper sx={{ p: 2 }}>\r\n        {/* Header */}\r\n        <Stack direction={{ xs: 'column', sm: 'row' }} justifyContent=\"space-between\" spacing={2}>\r\n          <Box>\r\n            <Typography variant=\"h6\">Cartões</Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Gere o cartão (token) e imprima o cartão físico com QRCode para a carteira online.\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Button startIcon={<RefreshIcon />} onClick={() => loadCard(childId)} disabled={loading || !childId}>\r\n            Atualizar\r\n          </Button>\r\n        </Stack>\r\n\r\n        {error && (\r\n          <Box sx={{ mt: 2 }}>\r\n            <Alert severity=\"error\">{error}</Alert>\r\n          </Box>\r\n        )}\r\n        {success && (\r\n          <Box sx={{ mt: 2 }}>\r\n            <Alert severity=\"success\">{success}</Alert>\r\n          </Box>\r\n        )}\r\n\r\n        <Divider sx={{ my: 2 }} />\r\n\r\n        <Stack spacing={2}>\r\n          {/* Seleção */}\r\n          <TextField\r\n            select\r\n            label=\"Selecione a criança\"\r\n            value={childId}\r\n            onChange={(e) => setChildId(e.target.value)}\r\n            fullWidth\r\n            disabled={loading}\r\n          >\r\n            {children.map((c) => (\r\n              <MenuItem key={c.id} value={c.id}>\r\n                {c.name}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n\r\n          {/* Status */}\r\n          <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n            <Stack\r\n              direction={{ xs: 'column', sm: 'row' }}\r\n              spacing={2}\r\n              alignItems={{ xs: 'stretch', sm: 'center' }}\r\n              justifyContent=\"space-between\"\r\n            >\r\n              <Box>\r\n                <Typography fontWeight={800}>\r\n                  {selectedChild ? selectedChild.name : '—'}\r\n                </Typography>\r\n\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\r\n                  {activeCard ? `Token: ${shortToken(activeCard.token)}` : 'Sem cartão ainda'}\r\n                </Typography>\r\n              </Box>\r\n\r\n              <Stack direction=\"row\" spacing={1} alignItems=\"center\" justifyContent=\"flex-end\">\r\n                {loading ? (\r\n                  <CircularProgress size={22} />\r\n                ) : activeCard ? (\r\n                  <Chip size=\"small\" label=\"CARTÃO OK\" />\r\n                ) : (\r\n                  <Chip size=\"small\" label=\"SEM CARTÃO\" />\r\n                )}\r\n\r\n                <Button\r\n                  variant=\"contained\"\r\n                  startIcon={<CreditCardIcon />}\r\n                  onClick={handleGenerateCard}\r\n                  disabled={working || loading || !childId || !!activeCard}\r\n                  title={activeCard ? 'Já existe cartão' : 'Gerar cartão'}\r\n                >\r\n                  Gerar cartão\r\n                </Button>\r\n              </Stack>\r\n            </Stack>\r\n          </Paper>\r\n\r\n          {/* Link */}\r\n          <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n            <Typography fontWeight={800} sx={{ mb: 1 }}>\r\n              Carteira online\r\n            </Typography>\r\n\r\n            <Stack direction={{ xs: 'column', sm: 'row' }} spacing={1} alignItems=\"stretch\">\r\n              <TextField\r\n                label=\"Link\"\r\n                value={walletUrl || ''}\r\n                fullWidth\r\n                InputProps={{ readOnly: true }}\r\n                placeholder=\"Gere um cartão para aparecer o link\"\r\n              />\r\n\r\n              <Stack direction=\"row\" spacing={1} justifyContent=\"flex-end\">\r\n                <Tooltip title=\"Copiar link\">\r\n                  <span>\r\n                    <IconButton onClick={handleCopyLink} disabled={!walletUrl}>\r\n                      <ContentCopyIcon />\r\n                    </IconButton>\r\n                  </span>\r\n                </Tooltip>\r\n\r\n                <Tooltip title=\"Abrir carteira\">\r\n                  <span>\r\n                    <IconButton onClick={handleOpenWallet} disabled={!walletUrl}>\r\n                      <OpenInNewIcon />\r\n                    </IconButton>\r\n                  </span>\r\n                </Tooltip>\r\n              </Stack>\r\n            </Stack>\r\n          </Paper>\r\n\r\n          {/* Cartão físico */}\r\n          <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n            <Stack\r\n              direction={{ xs: 'column', sm: 'row' }}\r\n              spacing={2}\r\n              alignItems={{ xs: 'stretch', sm: 'center' }}\r\n              justifyContent=\"space-between\"\r\n            >\r\n              <Box>\r\n                <Typography fontWeight={800}>Cartão físico</Typography>\r\n                {/* <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Formato cartão de crédito. Para ficar perfeito: escala 100% + “imprimir plano de fundo”.\r\n                </Typography> */}\r\n              </Box>\r\n\r\n              <Stack direction=\"row\" spacing={1} justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  startIcon={<PrintIcon />}\r\n                  onClick={handlePrintBatch}\r\n                  disabled={working || loading || children.length === 0}\r\n                  title=\"Imprime somente crianças que já têm cartão\"\r\n                >\r\n                  Imprimir em lote\r\n                </Button>\r\n\r\n                <Button\r\n                  variant=\"contained\"\r\n                  startIcon={<PrintIcon />}\r\n                  onClick={handlePrintSingle}\r\n                  disabled={!walletUrl || !selectedChild || !activeCard?.token}\r\n                >\r\n                  Imprimir\r\n                </Button>\r\n              </Stack>\r\n            </Stack>\r\n\r\n            {batchMissingCount > 0 && (\r\n              <Box sx={{ mt: 1 }}>\r\n                <Alert severity=\"info\">\r\n                  No lote: {batchMissingCount} criança(s) ainda sem cartão (não serão impressas).\r\n                </Alert>\r\n              </Box>\r\n            )}\r\n\r\n            <Divider sx={{ my: 2 }} />\r\n\r\n            {/* PREVIEW na tela (sempre mostra o selecionado) */}\r\n            <Box sx={{ display: 'flex', justifyContent: 'center', py: 2 }}>\r\n              <CreditStyleCard\r\n                childName={selectedChild?.name || 'Selecione uma criança'}\r\n                token={activeCard?.token || ''}\r\n                walletUrl={walletUrl || ''}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Stack>\r\n      </Paper>\r\n\r\n      {/* ÁREA DE IMPRESSÃO (single ou batch) */}\r\n      <Box id=\"print-root\">\r\n        {/* SINGLE */}\r\n        {printMode === 'single' && selectedChild && activeCard?.token && walletUrl && (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 2 }}>\r\n            <CreditStyleCard\r\n              childName={selectedChild.name}\r\n              token={activeCard.token}\r\n              walletUrl={walletUrl}\r\n            />\r\n          </Box>\r\n        )}\r\n\r\n        {/* BATCH */}\r\n        {printMode === 'batch' && (\r\n          <div className=\"batch-grid\">\r\n            {batchItems.map((it, idx) => (\r\n              <div key={it.child.id} className=\"no-break\">\r\n                <CreditStyleCard\r\n                  childName={it.child.name}\r\n                  token={it.card.token}\r\n                  walletUrl={it.url}\r\n                />\r\n\r\n                {/* opcional: quebra página a cada 9 cartões (3x3) */}\r\n                {(idx + 1) % 9 === 0 && <div className=\"page-break\" />}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2661, "column": 0}, "map": {"version":3,"sources":["file:///D:/git/dracma-bank-web/app/components/admin/AdminLayout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport {\r\n  Box,\r\n  Tabs,\r\n  Tab,\r\n  AppBar,\r\n  Toolbar,\r\n  Typography\r\n} from '@mui/material'\r\n\r\nimport TabsCriancas from './TabsCriancas';\r\nimport TabsLancamentos from './TabsLancamentos';\r\nimport TabsCartoes from './TabsCartoes';\r\n\r\nexport default function AdminLayout() {\r\n  const [tab, setTab] = React.useState(0)\r\n\r\n  return (\r\n    <Box sx={{ minHeight: '100vh', bgcolor: '#f5f5f5' }}>\r\n      \r\n      {/* Topbar */}\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\">\r\n            Dracma Bank • Admin\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      {/* Tabs */}\r\n      <Tabs\r\n        value={tab}\r\n        onChange={(_, newValue) => setTab(newValue)}\r\n        centered\r\n        sx={{ bgcolor: '#fff' }}\r\n      >\r\n        <Tab label=\"Crianças\" />\r\n        <Tab label=\"Lançamentos\" />\r\n        <Tab label=\"Cartões\" />\r\n      </Tabs>\r\n\r\n      {/* Conteúdo */}\r\n      <Box sx={{ p: 2 }}>\r\n        {tab === 0 && <TabsCriancas />}\r\n        {tab === 1 && <TabsLancamentos />}\r\n        {tab === 2 && <TabsCartoes />}\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;;;AAdA;;;;;;AAgBe,SAAS;;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,kMAAc,CAAC;IAErC,qBACE,sNAAC,2NAAG;QAAC,IAAI;YAAE,WAAW;YAAS,SAAS;QAAU;;0BAGhD,sNAAC,uOAAM;gBAAC,UAAS;0BACf,cAAA,sNAAC,2OAAO;8BACN,cAAA,sNAAC,uPAAU;wBAAC,SAAQ;kCAAK;;;;;;;;;;;;;;;;0BAO7B,sNAAC,+NAAI;gBACH,OAAO;gBACP,UAAU,CAAC,GAAG,WAAa,OAAO;gBAClC,QAAQ;gBACR,IAAI;oBAAE,SAAS;gBAAO;;kCAEtB,sNAAC,2NAAG;wBAAC,OAAM;;;;;;kCACX,sNAAC,2NAAG;wBAAC,OAAM;;;;;;kCACX,sNAAC,2NAAG;wBAAC,OAAM;;;;;;;;;;;;0BAIb,sNAAC,2NAAG;gBAAC,IAAI;oBAAE,GAAG;gBAAE;;oBACb,QAAQ,mBAAK,sNAAC,kLAAY;;;;;oBAC1B,QAAQ,mBAAK,sNAAC,qLAAe;;;;;oBAC7B,QAAQ,mBAAK,sNAAC,iLAAW;;;;;;;;;;;;;;;;;AAIlC;GAnCwB;KAAA"}}]
}